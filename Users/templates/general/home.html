{% extends 'users/base.html' %}
{% load static %}

{% block title %}
    <title>Suministros Agropecuarios | AGROVENCA™</title>
{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{% static 'users/general/home.css' %}">
    <link rel="stylesheet" href="{% static 'users/Componentes/Carousel/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'users/Componentes/Carousel/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'users/Iconos/style.css' %}">
{% endblock %}

{% block container %}
    <div class="carrousel-container">
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <a href="{% url 'productos' %}">
                    <img src="{% static 'users/imagenes/Agro_Tienda/carusel1.jpg' %}" class="d-block w-100" alt="Tu aliado agropecuario" loading="lazy">
                </a>
            </div>
            <div class="carousel-item">
                <a href="{% url 'productos' %}">
                    <img src="{% static 'users/imagenes/Agro_Tienda/carusel2.jpg' %}" class="d-block w-100" alt="Somos garantes de la salud animal" loading="lazy">
                </a>
            </div>
            <div class="carousel-item">
                <a href="{% url 'productos' %}">
                    <img src="{% static 'users/imagenes/Agro_Tienda/carusel3.jpg' %}" class="d-block w-100" alt="Línea avícola" loading="lazy">
                </a>
            </div>
            <div class="carousel-item">
                <a href="{% url 'productos' %}">
                    <img src="{% static 'users/imagenes/Agro_Tienda/carusel4.jpg' %}" class="d-block w-100" alt="Línea avícola" loading="lazy">
                </a>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
            <span class="carousel-control-prev-icon bg-dark" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
            <span class="carousel-control-next-icon bg-dark" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    </div>

    <div class="container pt-0">
        <section class="icons my-5 gap-3">
            <div class="truck border-end border-3" style="border-color: #04b547;">
                <img src="{% static 'users/Iconos/truck-fast-solid.svg' %}" alt="" style="width: 2rem; height: 2rem" loading="lazy">
                <div class="description">
                    <h2 class="title m-0">Envíos Gratis</h2>
                    <p class="text m-0 text-muted">a nivel nacional</p>
                </div>
            </div>
            <div class="pay border-end border-3" style="border-color: #04b547;">
                <span class="icon-credit-card"></span>
                <div class="description">
                    <h2 class="title m-0">Pago Rápido</h2>
                    <p class="text m-0 text-muted">Pago 100% seguro</p>
                </div>
            </div>
            <div class="number1 border-end border-3" style="border-color: #04b547;">
                <img src="{% static 'users/Iconos/ranking-star-solid.svg' %}" alt="" style="width: 2rem; height: 2rem" loading="lazy">
                <div class="description">
                    <h2 class="title m-0">Mejores Productos</h2>
                    <p class="text m-0 text-muted">de primera calidad.</p>
                </div>
            </div>
            <div class="help">
                <a href="https://api.whatsapp.com/send?phone=584122647923" class="text-reset text-decoration-none" target="_blank">
                    <span class="icon-headphones"></span>
                    <div class="description">
                        <h2 class="title m-0">¿Dudas?</h2>
                        <p class="text m-0 text-muted">Nosotros te ayudamos</p>
                        <p class="text m-0 text-muted">+58 412-2647923</p>
                    </div>
                </a>
            </div>
        </section>

        <section class="recommended-products my-5">
            <h3 class="text-center title fs-2 mt-5 fw-bold">PRODUCTOS MÁS VENDIDOS</h3>
            <p class="text text-center">Ve todos nuestros <a href="{% url 'productos' %}">productos aquí</a></p>
            <div class="content-recommended-products my-5">
                {% if recommended_products %}
                        <div class="owl-container">
                            <div class="owl-carousel owl-theme">
                                {% for recommended_product in recommended_products %}
                                    <div class="item me-5" style="width: 350px;">
                                        <a href="{% url 'detail_producto' recommended_product.id %}" class="text-decoration-none text-reset">
                                            <div class="card position-relative" style="height: 100%">
                                                {% if recommended_product.imagenes %}
                                                    <figure class="container_img position-relative">
                                                        <img src="{{ recommended_product.imagenes.first.imagen.url }}" class="card-img-top" alt="..." style="object-fit: cover" loading="lazy">
                                                        {% if recommended_product.cantidad == 0 %}
                                                            <p class="legend position-absolute px-5 py-2 text-white fw-bold" style="background-color: rgba(0, 0, 0, 0.5); z-index: 9999; top: calc(50% - 1rem); left: calc(50% - 5rem">AGOTADO</p>
                                                        {% endif %}
                                                    </figure>
                                                {% endif %}
                                                <p class="legend position-absolute px-3 py-2 text-white fw-bold" style="background-color: #31b771; z-index: 999999;">ENVÍO GRATIS</p>
                                                <div class="card-body">
                                                    <p class="number text-success fw-bold fs-5 precio_producto">US$ {{ recommended_product.get_descuento3 }}</p>
                                                    <h5 class="card-title">{{ recommended_product.nombre | title }}</h5>
                                                    <p class="card-text text mt-3">{{ recommended_product.get_short_desc }}</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                {% endif %}
            </div>
        </section>

        <section class="recommended_categories my-5">
            {% if recommended_categories %}
                <h2 class="title text-center my-3 fw-bold">CATEGORÍAS MÁS VISITADAS</h2>
                <p class="text text-center">Ve todas las <a href="{% url 'productos' %}">categorías aquí</a></p>
                <div class="content d-flex gap-3 justify-content-evenly flex-wrap my-5">
                    {% for recommended_category in recommended_categories %}
                        <a href="/productos/?category={{ recommended_category.id }}" class="text-decoration-none shadow text-reset d-inline-block" style="width: 300px; height: 300px; overflow: hidden; border-radius: 10px">
                            <div class="category" style="position: relative">
                                <figure class="img-category" style="background-image: url({{ recommended_category.get_imagen }})"></figure>
                                <h3 class="name-category title">{{ recommended_category.nombre | title }}</h3>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            {% endif %}
        </section>

        <section class="info-img my-5" style="overflow: hidden; border-radius: 10px 60px 10px 60px">
            {% if evento %}
                <figure class="img" style="background-image: url({{ evento.imagen.url }})"></figure>
                <div class="description-img" style="background-color: transparent;">
                    {% if evento.texto_boton and evento.get_link %}
                        <a href="{{ evento.get_link }}" class="btn btn-light fw-bold text mt-5 rounded-0 py-2 px-4" style="width: max-content; text-transform: uppercase">{{ evento.texto_boton }}</a>
                    {% endif %}
                </div>
            {% else %}
                <figure class="img" style="background-image: url('https://www.agro-expovirtual.portalagrochile.cl/wp-content/uploads/2020/06/expo-virtual-agro-2020-1.jpg')"></figure>
                <div class="description-img">
                    <h3 class="title fs-1 fw-bold">Special Edition</h3>
                    <p class="text fs-6">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut elit tellus, luctus nec ullamcorper mattis, pulvinar dapibus leo.</p>
                    <a href="#" class="btn btn-light fw-bold text mt-5 rounded-0" style="width: max-content; text-transform: uppercase">SHOP NOW</a>
                </div>
            {% endif %}
        </section>

        <section class="products my-5">
            <h3 class="text-center title fs-2 mt-5 fw-bold">PRODUCTOS PARA TÍ</h3>
            <p class="text text-center">Ve todos nuestros <a href="{% url 'productos' %}">productos aquí</a></p>
            <div class="content-products my-5">
                {% if recommended_products %}
                    <div class="owl-container">
                        <div class="owl-carousel owl-theme">
                            {% for product in products %}
                                <div class="item me-5" style="width: 350px;">
                                    <a href="{% url 'detail_producto' product.id %}" class="text-decoration-none text-reset">
                                        <div class="card position-relative" style="height: 100%">
                                            {% if product.imagenes %}
                                                <figure class="container_img position-relative">
                                                    <img src="{{ product.imagenes.first.imagen.url }}" class="card-img-top" alt="..." style="object-fit: cover" loading="lazy">
                                                    {% if product.cantidad == 0 %}
                                                        <p class="legend position-absolute px-5 py-2 text-white fw-bold" style="background-color: rgba(0, 0, 0, 0.5); z-index: 9999; top: calc(50% - 1rem); left: calc(50% - 5rem">AGOTADO</p>
                                                    {% endif %}
                                                </figure>
                                            {% endif %}
                                            <p class="legend position-absolute px-3 py-2 text-white fw-bold" style="background-color: #31b771; z-index: 999999">ENVÍO GRATIS</p>
                                            <div class="card-body">
                                                <p class="number text-success fw-bold fs-5 precio_producto">US$ {{ product.get_descuento3 }}</p>
                                                <h5 class="card-title">{{ product.nombre | title }}</h5>
                                                <p class="card-text mt-3">{{ product.get_short_desc }}</p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            </div>
        </section>

    </div>
{% endblock %}

{% block js %}
    <script src="{% static 'users/Componentes/Carousel/jquery.min.js' %}"></script>
    <script src="{% static 'users/Componentes/Carousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'users/Componentes/Carousel/main.js' %}"></script>
{% endblock %}
